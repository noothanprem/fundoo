<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <style>
        img {
                min-width : 500px;
                min-height : 500px;
            }
    </style>
    <img src="https://ik.imagekit.io/demo/img/image1.jpeg?tr=w-400,h-300" />
    <img src="https://ik.imagekit.io/demo/img/image2.jpeg?tr=w-400,h-300" />
    <img src="https://ik.imagekit.io/demo/img/image3.jpg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image4.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image5.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image6.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image7.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image8.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image9.jpeg?tr=w-400,h-300" />
    <img class="lazy" data-src="https://ik.imagekit.io/demo/img/image10.jpeg?tr=w-400,h-300" />
</body>
<script>
    console.log("Inside script");
    const images = document.querySelectorAll(".lazy");
    console.log(images);
    function preloadImage(img) {
        console.log("Inside preload image");
        const srcs = img.getAttribute("dat a-src");
        if(!srcs) {
            console.log("Inside script !srcs");
            return;
        }
        img.src = src;
    }

    const impOptions = {
        threshold : 0.1,
        rootMargin : "0px"
    };
    const imgObserver = new IntersectionObserver((entries,
    imgObserver) => {
        console.log("Inside Intersectionobserver");
        entries.forEach(entry => {
            console.log("Inside IntersectionObserver For each");
            if(!entry.isIntersecting) {
                console.log("Inside Intersection observer for each IF");
                return;
            } else {
                console.log("Inside Intersection observer for each else");
                preloadImage(entry.target);
                imgObserver.unobserve(entry.target);

            }
        });
    }, imgOptions);
    console.log("Before images foreach)
    images.forEach(image => {
        console.log("Inside images for each");
        imgObserver.observe(image);
    });


</script>
</html>